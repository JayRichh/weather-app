(()=>{const t=document.getElementById("location-input"),e=document.getElementById("error-message"),n=document.getElementById("change-units");async function o(t){let e=n.classList.contains("active")?"imperial":"metric";try{!function(){const t=document.querySelector(".loading-spinner");t.classList.add("active"),t.innerHTML='<div class="follow-the-leader">\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n    <div></div>\n  </div>'}();const n=await fetch(`https://api.openweathermap.org/data/2.5/weather?q=${t}&appid=3b6250101aeaef786b575f520ceec263&units=${e}`),o=await n.json();!function(t){const{status:e,location:n,countryAbbrev:o,temp:i,feels:a,humidity:c,wind:d,icon:s}=t,r=document.getElementById("weather-icon"),l=document.getElementById("forecast-description"),m=document.getElementById("location-display"),u=document.getElementById("temperature-reading"),y=document.getElementById("feels-like"),g=document.getElementById("humidity"),p=document.getElementById("wind");r.src=s,l.textContent=e,m.textContent=n+", "+o,u.textContent=i,y.textContent=a,g.textContent=c,p.textContent=d}({status:o.weather[0].main,location:o.name,countryAbbrev:o.sys.country,temp:`${o.main.temp}`,feels:`${o.main.feels_like}`,humidity:`${o.main.humidity}%`,wind:`${o.wind.speed} m/s`,icon:`http://openweathermap.org/img/wn/${o.weather[0].icon}.png`})}catch(t){console.log(t)}finally{!function(){const t=document.querySelector(".loading-spinner");t.classList.remove("active"),t.innerHTML=""}()}}t.addEventListener("keypress",(async e=>{"Enter"===e.key&&(e.preventDefault(),o(t.value))})),document.addEventListener("DOMContentLoaded",(async function(){const t=await async function(){return new Promise(((t,e)=>{navigator.geolocation.getCurrentPosition(t,e)})).then((t=>t)).catch((t=>{e.textContent=t.message}))}(),{latitude:n,longitude:i}=t.coords,a=await fetch(`https://api.openweathermap.org/data/2.5/weather?lat=${n}&lon=${i}&appid=3b6250101aeaef786b575f520ceec263&units=metric`);o((await a.json()).name)})),n.addEventListener("click",(function(){n.classList.toggle("active");const t=document.getElementById("temperature-reading"),e=document.getElementById("feels-like");let o=document.querySelectorAll("#units");function i(t){return 9*t/5+32}function a(t){return 5*(t-32)/9}"℃"===o[0].textContent?(t.textContent=i(t.textContent).toFixed(2),e.textContent=i(e.textContent).toFixed(2),o[0].textContent="℉",o[1].textContent="℉"):(t.textContent=a(t.textContent).toFixed(2),e.textContent=a(e.textContent).toFixed(2),o[0].textContent="℃",o[1].textContent="℃")}))})();